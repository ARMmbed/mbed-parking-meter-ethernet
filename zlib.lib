https://developer.mbed.org/users/ansond/code/zlib/#c269a5aba4b9
